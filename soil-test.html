<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krishi Mitra - Agricultural Advisory</title>
    <link rel="stylesheet" href="static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="frontend/js/language.js" defer></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-seedling"></i> KRISHI MITRA</h1>
            <p class="subtitle">Your Agricultural Advisory Companion</p>
        </header>

        <main class="main-content">
            <div class="menu-container">
                <h2>Choose Input Method</h2>
                <div class="menu-grid">
                    <!-- Location-based advice -->
                    <div class="menu-card" onclick="showLocationForm()">
                        <div class="card-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <h3>üìç Select Your Location</h3>
                        <p>Get area-based advice</p>
                        <div class="card-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <!-- Simple questions -->
                    <div class="menu-card" onclick="showQuestionsForm()">
                        <div class="card-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h3>üëÅÔ∏è Answer Simple Questions</h3>
                        <p>Soil color, texture, etc.</p>
                        <div class="card-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <!-- Lab test data -->
                    <div class="menu-card" onclick="showLabDataForm()">
                        <div class="card-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h3>üìã Enter Lab Test Data</h3>
                        <p>For farmers with reports</p>
                        <div class="card-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>
<!-- REPLACE YOUR STATE/DISTRICT DROPDOWNS WITH THIS -->
<label for="taluk">Taluk (‡≤§‡≤æ‡≤≤‡≥Ç‡≤ï‡≥Å):</label>
<select id="taluk" onchange="loadVillages()">
    <option value="">Select Taluk</option>
    <option value="Mysuru">Mysuru</option>
    <option value="HD Kote">HD Kote</option>
    <option value="Hunsur">Hunsur</option>
    <option value="Nanjangud">T. Narasipura</option>
</select>

<label for="village">Village (‡≤π‡≤≥‡≥ç‡≤≥‡≤ø):</label>
<select id="village">
    <option value="">Select Village</option>
</select>


            <!-- Questions Form -->
            <div id="questionsForm" class="form-container" style="display: none;">
                <div class="form-header">
                    <button class="back-btn" onclick="showMainMenu()">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <h2>üëÅÔ∏è Soil Assessment Questions</h2>
                </div>
                <form id="questionsFormElement" class="form">
                    <div class="form-group">
                        <label for="soilColor">Soil Color:</label>
                        <select id="soilColor" name="soilColor" required>
                            <option value="">Select Soil Color</option>
                            <option value="black">Black</option>
                            <option value="brown">Brown</option>
                            <option value="red">Red</option>
                            <option value="yellow">Yellow</option>
                            <option value="gray">Gray</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="soilTexture">Soil Texture:</label>
                        <select id="soilTexture" name="soilTexture" required>
                            <option value="">Select Soil Texture</option>
                            <option value="clay">Clay</option>
                            <option value="sandy">Sandy</option>
                            <option value="loamy">Loamy</option>
                            <option value="silty">Silty</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="drainage">Drainage:</label>
                        <select id="drainage" name="drainage" required>
                            <option value="">Select Drainage</option>
                            <option value="good">Good</option>
                            <option value="moderate">Moderate</option>
                            <option value="poor">Poor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="moistureLevel">Moisture Level:</label>
                        <select id="moistureLevel" name="moistureLevel" required>
                            <option value="">Select Moisture Level</option>
                            <option value="dry">Dry</option>
                            <option value="moist">Moist</option>
                            <option value="wet">Wet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cropIntended">Intended Crop:</label>
                        <input type="text" id="cropIntended" name="cropIntended" placeholder="What crop do you want to grow?" required>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-leaf"></i> Get Soil Advice
                    </button>
                </form>
            </div>

            <!-- Lab Data Form -->
            <div id="labDataForm" class="form-container" style="display: none;">
                <div class="form-header">
                    <button class="back-btn" onclick="showMainMenu()">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <h2>üìã Lab Test Data Input</h2>
                </div>
                <form id="labDataFormElement" class="form">
                    <div class="form-group">
                        <label for="nitrogen">Nitrogen (N) - mg/kg:</label>
                        <input type="number" id="nitrogen" name="N" step="0.01" placeholder="e.g., 0.15" required>
                    </div>
                    <div class="form-group">
                        <label for="phosphorus">Phosphorus (P) - mg/kg:</label>
                        <input type="number" id="phosphorus" name="P" step="0.01" placeholder="e.g., 12.5" required>
                    </div>
                    <div class="form-group">
                        <label for="potassium">Potassium (K) - mg/kg:</label>
                        <input type="number" id="potassium" name="K" step="0.01" placeholder="e.g., 120" required>
                    </div>
                    <div class="form-group">
                        <label for="ph">pH Level:</label>
                        <input type="number" id="ph" name="pH" step="0.1" min="0" max="14" placeholder="e.g., 6.5" required>
                    </div>
                    <div class="form-group">
                        <label for="moisture">Moisture Content (%):</label>
                        <input type="number" id="moisture" name="moisture" step="0.1" placeholder="e.g., 25.0" required>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-flask"></i> Analyze Lab Data
                    </button>
                </form>
            </div>

            <!-- Results Container -->
            <div id="resultsContainer" class="results-container" style="display: none;">
                <div class="results-header">
                    <button class="back-btn" onclick="showMainMenu()">
                        <i class="fas fa-arrow-left"></i> Back to Menu
                    </button>
                    <h2>üìä Analysis Results</h2>
                </div>
                <div id="resultsContent" class="results-content">
                    <!-- Results will be populated here -->
                </div>
            </div>
        </main>
    </div>
// PASTE THIS AT THE VERY TOP OF YOUR <script> TAG IN index.html (renamed to soil-test.html)

// Authentication check
const user = JSON.parse(localStorage.getItem('currentUser'));
if (!user) {
    window.location.href = 'login.html';
}

// Mysuru villages data
const villages = {
    'Mysuru': ['Srirangapatna', 'Mandya Road', 'Alanahalli', 'Bogadi'],
    'HD Kote': ['Antharasanthe', 'Bilikere', 'Bandipur'],
    'Hunsur': ['Harave', 'Yedehalli', 'Bannikuppe'],
    'Nanjangud': ['Nanjangud Town', 'T. Narasipura', 'Begur']
};

function loadVillages() {
    const taluk = document.getElementById('taluk').value;
    const villageSelect = document.getElementById('village');
    villageSelect.innerHTML = '<option value="">Select Village</option>';
    if (villages[taluk]) {
        villages[taluk].forEach(v => {
            villageSelect.innerHTML += `<option value="${v}">${v}</option>`;
        });
    }
}

    <script src="static/script.js"></script>
</body>
</html>
